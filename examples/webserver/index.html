<!DOCTYPE html>
<html>
<head>
    <title>ç¼“å­˜WebæœåŠ¡</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { color: #007bff; margin-bottom: 10px; }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 20px 0;
            overflow: hidden;
        }
        .card-header {
            background: #007bff;
            color: white;
            padding: 15px 20px;
            font-weight: bold;
        }
        .card-body { padding: 20px; }
        .endpoint {
            display: flex;
            align-items: flex-start;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .method {
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 15px;
            min-width: 70px;
            text-align: center;
            font-size: 12px;
        }
        .method.post { background: #28a745; color: white; }
        .method.get { background: #007bff; color: white; }
        .method.delete { background: #dc3545; color: white; }
        .endpoint-content { flex: 1; }
        .endpoint-url { font-family: monospace; font-weight: bold; margin-bottom: 8px; }
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value { font-size: 24px; font-weight: bold; color: #007bff; }
        .stat-label { color: #6c757d; margin-top: 5px; }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover { background: #0056b3; }
        .btn-small { padding: 4px 8px; font-size: 12px; }
        .form-group { margin: 15px 0; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .result {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .result.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .result.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .tabs { display: flex; border-bottom: 1px solid #ddd; margin-bottom: 20px; }
        .tab { padding: 10px 20px; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab.active { border-bottom-color: #007bff; color: #007bff; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ ç¼“å­˜WebæœåŠ¡</h1>
            <p>åŸºäºGoç¼“å­˜åº“çš„REST APIç¤ºä¾‹æœåŠ¡ - æ”¯æŒè¿œç¨‹è°ƒç”¨</p>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('api')">APIæ¥å£</div>
            <div class="tab" onclick="showTab('test')">åœ¨çº¿æµ‹è¯•</div>
            <div class="tab" onclick="showTab('monitor')">å®æ—¶ç›‘æ§</div>
        </div>

        <div id="api" class="tab-content active">
            <div class="card">
                <div class="card-header">ğŸ“‹ APIç«¯ç‚¹</div>
                <div class="card-body">
                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/set</div>
                            <pre>curl -X POST http://localhost:8080/api/cache/set \
  -H "Content-Type: application/json" \
  -d '{"key":"user1","value":"å¼ ä¸‰","ttl":"1h"}'</pre>
                            <button class="btn btn-small" onclick="testAPI('set')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/get?key=user1</div>
                            <pre>curl http://localhost:8080/api/cache/get?key=user1</pre>
                            <button class="btn btn-small" onclick="testAPI('get')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method delete">DELETE</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/delete?key=user1</div>
                            <pre>curl -X DELETE http://localhost:8080/api/cache/delete?key=user1</pre>
                            <button class="btn btn-small" onclick="testAPI('delete')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/exists?key=user1</div>
                            <pre>curl http://localhost:8080/api/cache/exists?key=user1</pre>
                            <button class="btn btn-small" onclick="testAPI('exists')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/flush</div>
                            <pre>curl -X POST http://localhost:8080/api/cache/flush</pre>
                            <button class="btn btn-small" onclick="testAPI('flush')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/stats</div>
                            <pre>curl http://localhost:8080/api/cache/stats</pre>
                            <button class="btn btn-small" onclick="testAPI('stats')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/keys</div>
                            <pre>curl http://localhost:8080/api/cache/keys</pre>
                            <button class="btn btn-small" onclick="testAPI('keys')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/setlist</div>
                            <pre>curl -X POST http://localhost:8080/api/cache/setlist \
  -H "Content-Type: application/json" \
  -d '{"key":"numbers","value":[1,2,3,4,5],"ttl":"1h"}</pre>
                            <button class="btn btn-small" onclick="testAPI('setlist')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/size</div>
                            <pre>curl http://localhost:8080/api/cache/size</pre>
                            <button class="btn btn-small" onclick="testAPI('size')">æµ‹è¯•</button>
                        </div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <div class="endpoint-content">
                            <div class="endpoint-url">/api/cache/keys/page?page=1&size=10</div>
                            <pre>curl "http://localhost:8080/api/cache/keys/page?page=1&size=10"</pre>
                            <button class="btn btn-small" onclick="testAPI('keysPage')">æµ‹è¯•</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">ğŸ”§ TTLæ ¼å¼</div>
                <div class="card-body">
                    <p>æ”¯æŒçš„æ—¶é—´æ ¼å¼ï¼š</p>
                    <ul>
                        <li><code>ns</code> - çº³ç§’</li>
                        <li><code>us</code> - å¾®ç§’</li>
                        <li><code>ms</code> - æ¯«ç§’</li>
                        <li><code>s</code> - ç§’</li>
                        <li><code>m</code> - åˆ†é’Ÿ</li>
                        <li><code>h</code> - å°æ—¶</li>
                    </ul>
                    <p>ç¤ºä¾‹ï¼š<code>30s</code>ã€<code>5m</code>ã€<code>2h</code>ã€<code>1h30m</code></p>
                </div>
            </div>
        </div>

        <div id="test" class="tab-content">
            <div class="card">
                <div class="card-header">ğŸ§ª åœ¨çº¿æµ‹è¯•</div>
                <div class="card-body">
                    <div class="form-group">
                        <label>æ“ä½œç±»å‹ï¼š</label>
                        <select id="testOperation" onchange="updateTestForm()">
                            <option value="set">è®¾ç½®ç¼“å­˜</option>
                            <option value="setlist">æ‰¹é‡è®¾ç½®ç¼“å­˜</option>
                            <option value="get">è·å–ç¼“å­˜</option>
                            <option value="delete">åˆ é™¤ç¼“å­˜</option>
                            <option value="exists">æ£€æŸ¥å­˜åœ¨</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>é”® (Key)ï¼š</label>
                        <input type="text" id="testKey" placeholder="ä¾‹å¦‚: user1" value="test_key">
                    </div>

                    <div class="form-group" id="valueGroup">
                        <label>å€¼ (Value)ï¼š</label>
                        <input type="text" id="testValue" placeholder="ä¾‹å¦‚: å¼ ä¸‰" value="test_value">
                    </div>

                    <div class="form-group" id="arrayValueGroup" style="display: none;">
                        <label>æ•°ç»„å€¼ (Array Value)ï¼š</label>
                        <textarea id="testArrayValue" placeholder="ä¾‹å¦‚: [1,2,3,4,5] æˆ– [&quot;apple&quot;,&quot;banana&quot;] æˆ– [1,&quot;hello&quot;,true]" rows="3" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">[1,2,3,4,5]</textarea>
                        <small style="color: #6c757d; margin-top: 4px; display: block;">è¾“å…¥JSONæ ¼å¼çš„æ•°ç»„ï¼Œæ”¯æŒæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰æ··åˆç±»å‹</small>
                    </div>

                    <div class="form-group">
                        <label>è¿‡æœŸæ—¶é—´ (TTL)ï¼š</label>
                        <input type="text" id="testTTL" placeholder="ä¾‹å¦‚: 30s, 5m, 1h (å¯é€‰)" value="1m">
                    </div>

                    <button class="btn" onclick="executeTest()">æ‰§è¡Œæµ‹è¯•</button>
                    <button class="btn" onclick="clearResult()" style="background: #6c757d; margin-left: 10px;">æ¸…ç©ºç»“æœ</button>

                    <div id="testResult"></div>
                </div>
            </div>
        </div>

        <div id="monitor" class="tab-content">
            <div class="card">
                <div class="card-header">ğŸ“Š å®æ—¶ç›‘æ§</div>
                <div class="card-body">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="statSize">-</div>
                            <div class="stat-label">ç¼“å­˜å¤§å°</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statHits">-</div>
                            <div class="stat-label">å‘½ä¸­æ¬¡æ•°</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statMisses">-</div>
                            <div class="stat-label">æœªå‘½ä¸­æ¬¡æ•°</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statHitRate">-</div>
                            <div class="stat-label">å‘½ä¸­ç‡</div>
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <button class="btn" onclick="refreshStats()">åˆ·æ–°ç»Ÿè®¡</button>
                        <button class="btn" onclick="toggleAutoRefresh()" id="autoRefreshBtn">å¼€å¯è‡ªåŠ¨åˆ·æ–°</button>
                        <button class="btn" onclick="showAllKeys()" style="background: #28a745;">æ˜¾ç¤ºæ‰€æœ‰é”®</button>
                        <button class="btn" onclick="showKeysPage()" style="background: #17a2b8;">åˆ†é¡µæ˜¾ç¤º</button>
                    </div>

                    <div id="keysResult" style="margin-top: 20px;"></div>

                    <div id="paginationControls" style="margin-top: 15px; display: none;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <button class="btn btn-small" onclick="previousPage()" id="prevBtn">ä¸Šä¸€é¡µ</button>
                            <span id="pageInfo">ç¬¬ 1 é¡µï¼Œå…± 1 é¡µ</span>
                            <button class="btn btn-small" onclick="nextPage()" id="nextBtn">ä¸‹ä¸€é¡µ</button>
                            <select id="pageSizeSelect" onchange="changePageSize()" style="padding: 4px 8px;">
                                <option value="10">æ¯é¡µ 10 æ¡</option>
                                <option value="20">æ¯é¡µ 20 æ¡</option>
                                <option value="50">æ¯é¡µ 50 æ¡</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let autoRefreshInterval = null;
        let isAutoRefresh = false;
        let currentPage = 1;
        let pageSize = 10;
        let totalPages = 1;

        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // å¦‚æœåˆ‡æ¢åˆ°ç›‘æ§æ ‡ç­¾ï¼Œè‡ªåŠ¨åˆ·æ–°ç»Ÿè®¡
            if (tabName === 'monitor') {
                refreshStats();
            }
        }

        function updateTestForm() {
            const operation = document.getElementById('testOperation').value;
            const valueGroup = document.getElementById('valueGroup');
            const arrayValueGroup = document.getElementById('arrayValueGroup');

            if (operation === 'setlist') {
                valueGroup.style.display = 'none';
                arrayValueGroup.style.display = 'block';
            } else {
                valueGroup.style.display = 'block';
                arrayValueGroup.style.display = 'none';
            }
        }

        async function testAPI(operation) {
            let url = '';
            let options = {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                }
            };

            switch(operation) {
                case 'set':
                    url = '/api/cache/set';
                    options.method = 'POST';
                    options.body = JSON.stringify({
                        key: 'demo_key',
                        value: 'demo_value',
                        ttl: '5m'
                    });
                    break;
                case 'setlist':
                    url = '/api/cache/setlist';
                    options.method = 'POST';
                    options.body = JSON.stringify({
                        key: 'demo_numbers',
                        value: [1, 2, 3, 4, 5],
                        ttl: '1h'
                    });
                    break;
                case 'get':
                    url = '/api/cache/get?key=demo_key';
                    break;
                case 'delete':
                    url = '/api/cache/delete?key=demo_key';
                    options.method = 'DELETE';
                    break;
                case 'exists':
                    url = '/api/cache/exists?key=demo_key';
                    break;
                case 'flush':
                    url = '/api/cache/flush';
                    options.method = 'POST';
                    break;
                case 'stats':
                    url = '/api/cache/stats';
                    break;
                case 'keys':
                    url = '/api/cache/keys';
                    break;
                case 'keysPage':
                    url = '/api/cache/keys/page?page=1&size=5';
                    break;
                case 'size':
                    url = '/api/cache/size';
                    break;
            }

            try {
                const response = await fetch(url, options);
                const data = await response.json();

                showResult(`âœ… ${operation.toUpperCase()} æˆåŠŸ:`, JSON.stringify(data, null, 2), 'success');
            } catch (error) {
                showResult(`âŒ ${operation.toUpperCase()} å¤±è´¥:`, error.message, 'error');
            }
        }

        async function executeTest() {
            const operation = document.getElementById('testOperation').value;
            const key = document.getElementById('testKey').value;
            const value = document.getElementById('testValue').value;
            const arrayValue = document.getElementById('testArrayValue').value;
            const ttl = document.getElementById('testTTL').value;

            if (!key) {
                showResult('âŒ é”™è¯¯', 'è¯·è¾“å…¥é”® (Key)', 'error');
                return;
            }

            let url = '';
            let options = {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                }
            };

            switch(operation) {
                case 'set':
                    if (!value) {
                        showResult('âŒ é”™è¯¯', 'è®¾ç½®æ“ä½œéœ€è¦è¾“å…¥å€¼ (Value)', 'error');
                        return;
                    }
                    url = '/api/cache/set';
                    options.method = 'POST';
                    const bodyData = { key, value };
                    if (ttl) bodyData.ttl = ttl;
                    options.body = JSON.stringify(bodyData);
                    break;
                case 'setlist':
                    if (!arrayValue) {
                        showResult('âŒ é”™è¯¯', 'æ‰¹é‡è®¾ç½®æ“ä½œéœ€è¦è¾“å…¥æ•°ç»„å€¼ (Array Value)', 'error');
                        return;
                    }
                    url = '/api/cache/setlist';
                    options.method = 'POST';
                    try {
                        const parsedArray = JSON.parse(arrayValue);
                        if (!Array.isArray(parsedArray)) {
                            showResult('âŒ é”™è¯¯', 'æ•°ç»„å€¼å¿…é¡»æ˜¯æœ‰æ•ˆçš„JSONæ•°ç»„æ ¼å¼', 'error');
                            return;
                        }
                        const listBodyData = { key, value: parsedArray };
                        if (ttl) listBodyData.ttl = ttl;
                        options.body = JSON.stringify(listBodyData);
                    } catch (e) {
                        showResult('âŒ é”™è¯¯', 'æ•°ç»„å€¼JSONæ ¼å¼é”™è¯¯: ' + e.message, 'error');
                        return;
                    }
                    break;
                case 'get':
                    url = `/api/cache/get?key=${encodeURIComponent(key)}`;
                    break;
                case 'delete':
                    url = `/api/cache/delete?key=${encodeURIComponent(key)}`;
                    options.method = 'DELETE';
                    break;
                case 'exists':
                    url = `/api/cache/exists?key=${encodeURIComponent(key)}`;
                    break;
            }

            try {
                const response = await fetch(url, options);
                const data = await response.json();

                showResult(`âœ… ${operation.toUpperCase()} æˆåŠŸ:`, JSON.stringify(data, null, 2), 'success');

                // å¦‚æœæ˜¯è®¾ç½®æ“ä½œï¼Œè‡ªåŠ¨åˆ·æ–°ç»Ÿè®¡
                if (operation === 'set' || operation === 'setlist') {
                    setTimeout(refreshStats, 500);
                }
            } catch (error) {
                showResult(`âŒ ${operation.toUpperCase()} å¤±è´¥:`, error.message, 'error');
            }
        }

        function showResult(title, content, type) {
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = `
                <div class="result ${type}">
                    <strong>${title}</strong>
                    <div>${content}</div>
                </div>
            `;
        }

        function clearResult() {
            document.getElementById('testResult').innerHTML = '';
        }

        async function refreshStats() {
            try {
                const response = await fetch('/api/cache/stats');
                const result = await response.json();

                if (result.success && result.data) {
                    const stats = result.data;
                    document.getElementById('statSize').textContent = stats.size || 0;
                    document.getElementById('statHits').textContent = stats.hits || 0;
                    document.getElementById('statMisses').textContent = stats.misses || 0;
                    document.getElementById('statHitRate').textContent =
                        (stats.hit_rate ? (stats.hit_rate * 100).toFixed(2) + '%' : '0%');
                } else {
                    console.error('APIè¿”å›æ ¼å¼é”™è¯¯:', result);
                }
            } catch (error) {
                console.error('è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:', error);
            }
        }

        function toggleAutoRefresh() {
            const btn = document.getElementById('autoRefreshBtn');

            if (isAutoRefresh) {
                clearInterval(autoRefreshInterval);
                isAutoRefresh = false;
                btn.textContent = 'å¼€å¯è‡ªåŠ¨åˆ·æ–°';
                btn.style.background = '#007bff';
            } else {
                autoRefreshInterval = setInterval(refreshStats, 2000);
                isAutoRefresh = true;
                btn.textContent = 'åœæ­¢è‡ªåŠ¨åˆ·æ–°';
                btn.style.background = '#dc3545';
            }
        }

        async function showAllKeys() {
            try {
                const response = await fetch('/api/cache/keys');
                const result = await response.json();

                const keysDiv = document.getElementById('keysResult');
                if (result.success && result.data && result.data.length > 0) {
                    keysDiv.innerHTML = `
                        <div style="margin-top: 15px;">
                            <strong>æ‰€æœ‰ç¼“å­˜é”® (${result.data.length} ä¸ª):</strong>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 8px;">
                                ${result.data.map(key => `<code style="margin: 2px 4px; padding: 2px 6px; background: #e9ecef; border-radius: 3px;">${key}</code>`).join('')}
                            </div>
                        </div>
                    `;
                    document.getElementById('paginationControls').style.display = 'none';
                } else {
                    keysDiv.innerHTML = '<div style="margin-top: 15px; color: #6c757d;">ç¼“å­˜ä¸ºç©º</div>';
                    document.getElementById('paginationControls').style.display = 'none';
                }
            } catch (error) {
                document.getElementById('keysResult').innerHTML =
                    `<div style="margin-top: 15px; color: #dc3545;">è·å–é”®åˆ—è¡¨å¤±è´¥: ${error.message}</div>`;
                document.getElementById('paginationControls').style.display = 'none';
            }
        }

        async function showKeysPage() {
            currentPage = 1;
            await loadKeysPage();
        }

        async function loadKeysPage() {
            try {
                const response = await fetch(`/api/cache/keys/page?page=${currentPage}&size=${pageSize}`);
                const result = await response.json();

                const keysDiv = document.getElementById('keysResult');
                if (result.success && result.data) {
                    const pageData = result.data;
                    totalPages = Math.ceil(pageData.total / pageSize);

                    keysDiv.innerHTML = `
                        <div style="margin-top: 15px;">
                            <strong>ç¼“å­˜é”® (ç¬¬ ${pageData.page} é¡µï¼Œå…± ${totalPages} é¡µï¼Œæ€»è®¡ ${pageData.total} ä¸ª):</strong>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 8px;">
                                ${pageData.keys.length > 0 ?
                                    pageData.keys.map(key => `<code style="margin: 2px 4px; padding: 2px 6px; background: #e9ecef; border-radius: 3px;">${key}</code>`).join('') :
                                    '<span style="color: #6c757d;">æ­¤é¡µæ— æ•°æ®</span>'
                                }
                            </div>
                        </div>
                    `;

                    // æ›´æ–°åˆ†é¡µæ§ä»¶
                    document.getElementById('paginationControls').style.display = 'flex';
                    document.getElementById('pageInfo').textContent = `ç¬¬ ${pageData.page} é¡µï¼Œå…± ${totalPages} é¡µ`;
                    document.getElementById('prevBtn').disabled = currentPage <= 1;
                    document.getElementById('nextBtn').disabled = !pageData.has_next;
                } else {
                    keysDiv.innerHTML = '<div style="margin-top: 15px; color: #6c757d;">ç¼“å­˜ä¸ºç©º</div>';
                    document.getElementById('paginationControls').style.display = 'none';
                }
            } catch (error) {
                document.getElementById('keysResult').innerHTML =
                    `<div style="margin-top: 15px; color: #dc3545;">è·å–åˆ†é¡µé”®åˆ—è¡¨å¤±è´¥: ${error.message}</div>`;
                document.getElementById('paginationControls').style.display = 'none';
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                loadKeysPage();
            }
        }

        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                loadKeysPage();
            }
        }

        function changePageSize() {
            const newSize = parseInt(document.getElementById('pageSizeSelect').value);
            if (newSize !== pageSize) {
                pageSize = newSize;
                currentPage = 1; // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
                loadKeysPage();
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ç»Ÿè®¡
        window.onload = function() {
            refreshStats();
            updateTestForm(); // åˆå§‹åŒ–æµ‹è¯•è¡¨å•
        };
    </script>
</body>
</html>